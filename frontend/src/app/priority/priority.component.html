<div class="body">
  <div class="mb-2 logo-section flex p-2 items-center justify-content-between">

    <div class="px-2 title-section flex items-center justify-between w-full">
      <div class="main-title text-lg font-semibold ">Priority Master</div>
      <p-button
        icon="pi pi-plus"
        (click)="addPriority()"
        severity="success"
        size="small"
        label="Add"
        [style]="{ height: '24px', fontSize: '12px' }"
        class="ml-auto"
      ></p-button>
    </div>
  </div>


     <p-table
     class="custom-table flex justify-content-center"
     [value]="priorityOptions"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[5, 10, 20]"
      [responsiveLayout]="'scroll'"
      [tableStyle]="{ 'width': '60rem' }"
      
    >
      <ng-template pTemplate="header">
        <tr>
          <th>S.No</th>
          <th>Priority ID</th>
          <th>Priority</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
        <tr>
          <td>{{ rowIndex + 1 }}</td>
          <td>{{ item.id }}</td>
          <td>
            <ng-container *ngIf="editingItem?.id === item.id; else viewPriority">
              <input
                type="number"
                pInputText
                [(ngModel)]="editingItem.p"
                style="width: 100px"
              />
            </ng-container>
            <ng-template #viewPriority>{{ item.p }}</ng-template>
          </td>
          <td>
            <ng-container *ngIf="editingItem?.id === item.id; else viewStatus">
              <p-select
                [options]="statusOptions"
                [(ngModel)]="editingItem.status"
                [style]="{ width: '100px' }"
                optionLabel="label"
                optionValue="value"
              ></p-select>
            </ng-container>
            <ng-template #viewStatus>{{ item.status === 1 ? 'Active' : 'Inactive' }}</ng-template>
          </td>
          <td>
            <p-button
              *ngIf="editingItem?.id !== item.id"
              pButton
              icon="pi pi-pencil"
              class="p-button-text p-button-sm"
              (click)="onEdit(item)"
              title="Edit"
            ></p-button>
            <p-button
            *ngIf="editingItem?.id === item.id"
            pButton
            icon="pi pi-check"
            class="p-button-text p-button-sm text-green-500"
            (click)="updateP()"
            title="Save"
          ></p-button>
          
          </td>
        </tr>
      </ng-template>
    </p-table>  
    
  </div>
  <p-dialog
  header="Add Priority"
  [(visible)]="addDialogVisible"
  [modal]="true"
  [style]="{ width: '400px' }"
  [closable]="false"
>
  <div class="p-fluid formgrid grid p-3 gap-3">
    <div class="field col-12">
      <label for="priorityName" class="font-semibold mb-2 block">Priority Name</label>
      <input
        id="priorityName"
        type="text"
        pInputText
        [(ngModel)]="newPriority.p"
        placeholder="Enter priority name"
        class="w-full"
      />
    </div>

    <div class="field col-12">
      <label for="status" class="font-semibold mb-2 block">Status</label>
      <p-select
        id="status"
        [options]="statusOptions"
        [(ngModel)]="newPriority.status"
        optionLabel="label"
        optionValue="value"
        class="w-full"
      ></p-select>
    </div>

    <div class="field col-12">
      <label for="remarks" class="font-semibold mb-2 block">Remarks</label>
      <textarea
        id="remarks"
        pTextarea 
        rows="3"
        [(ngModel)]="newPriority.remarks"
        placeholder="Enter Remarks"
        class="w-full"
      ></textarea>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-2 px-3 pb-2">
      <p-button
        pButton
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="addDialogVisible = false"
      ></p-button>
      <p-button
        pButton
        label="Save"
        icon="pi pi-check"
        (click)="saveNewPriority()"
        [disabled]="!newPriority.p"
      ></p-button>
    </div>
  </ng-template>
</p-dialog>

